@model FindYourMakeUp.Data.Models.Product
@{
    ViewBag.Title = "Details";
}
<div class="row">
    <div class="col-md-5">
        <h2>@Model.Name</h2>
        <h4>@Model.Manufacturer.Name</h4>
    </div>
    <div class="col-md-5">
        <h1 class="pull-right">

            <span class="alert @(( Model.Rating > 4.5 ? "alert-success": (Model.Rating<0)? "alert-danger" : "alert-info"))">
                Rating: @Model.Rating
            </span>
        </h1>
    </div>
</div>
<hr />
<div class="row">
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="col-md-5">@Model.Description</div>
        </div>
    </div>
</div>

<div class="row">
    @foreach (var review in Model.Reviews)
    {
        <div class="row">
            <div class="col-md-8">   @review.Content</div>
            <div class="col-md-4">
                 
                <span class="alert @(( Model.Rating > 4.5 ? "alert-success": (@Model.Rating<0)? "alert-danger" : "alert-info"))">
                    Rate: @review.Rate
                </span>
            </div>
        </div>
    <div class="divider" style="height:30px;"><hr /></div>
    }
</div>
<div id="create-review" class="row">
    <div class="text-center">
        @Ajax.ActionLink("Create review for this product", "Create", "Reviews", new { id = Model.Id },
                                                                    new AjaxOptions
                                                                    {
                                                                        HttpMethod = "GET",
                                                                        InsertionMode = InsertionMode.Replace,
                                                                        UpdateTargetId = "create-review"
                                                                    }, new { @class = "btn btn-success" })
    </div>
</div>
@section scripts
{
    <script>
        var onSuccess = function (result) {
            debugger;
            if (result.url) {
                // if the server returned a JSON object containing an url
                // property we redirect the browser to that url
                window.location.href = result.url;
            }
        }
    </script>
}